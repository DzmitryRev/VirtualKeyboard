(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t,n,a,i,r,s,c,l){return{code:e,rus:{standard:t,caps:n,shift:a,capsShift:i},eng:{standard:r,caps:s,shift:c,capsShift:l}}}(new(function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n(this,"isCapsLockActivated",!1),n(this,"selectedLanguage","eng"),n(this,"keyElementsNodeList",null),n(this,"textareaElement",null),n(this,"key",[]),this.keys=[[a("Backquote","ё","Ё","Ё","ё","`","`","~","~"),a("Digit1","1","1","!","!","1","1","!","!"),a("Digit2","2","2",'"','"',"2","2","@","@"),a("Digit3","3","3","№","№","3","3","#","#"),a("Digit4","4","4",";",";","4","4","$","$"),a("Digit5","5","5","%","%","5","5","%","%"),a("Digit6","6","6",":",":","6","6","^","^"),a("Digit7","7","7","?","?","7","7","&","&"),a("Digit8","8","8","*","*","8","8","*","*"),a("Digit9","9","9","(","(","9","9","(","("),a("Digit0","0","0",")",")","0","0",")",")"),a("Minus","-","-","_","_","-","-","_","_"),a("Equal","=","=","+","+","=","=","+","+"),a("Backspace","Backspace","Backspace","Backspace","Backspace","Backspace","Backspace","Backspace","Backspace")],[a("Tab","Tab","Tab","Tab","Tab","Tab","Tab","Tab","Tab"),a("KeyQ","й","Й","Й","й","q","Q","Q","q"),a("KeyW","ц","Ц","Ц","ц","w","W","W","w"),a("KeyE","у","У","У","у","e","E","E","e"),a("KeyR","к","К","К","к","r","R","R","r"),a("KeyT","е","Е","Е","е","t","T","T","t"),a("KeyY","н","Н","Н","н","y","Y","Y","y"),a("KeyU","г","Г","Г","г","u","U","U","u"),a("KeyI","ш","Ш","Ш","ш","i","I","I","i"),a("KeyO","щ","Щ","Щ","щ","o","O","O","o"),a("KeyP","з","З","З","з","p","P","P","p"),a("BracketLeft","х","Х","Х","х","[","[","{","}"),a("BracketRight","ъ","Ъ","Ъ","ъ","]","]","}","}"),a("Backslash","\\","\\","/","/","\\","\\","/","|"),a("Delete","Del","Del","Del","Del","Del","Del","Del","Del")],[a("CapsLock","CapsLock","CapsLock","CapsLock","CapsLock","CapsLock","CapsLock","CapsLock","CapsLock"),a("KeyA","ф","Ф","Ф","ф","a","A","A","a"),a("KeyS","ы","Ы","Ы","ы","s","S","S","s"),a("KeyD","в","В","В","в","d","D","D","d"),a("KeyF","а","А","А","а","f","F","F","f"),a("KeyG","п","П","П","п","g","G","G","g"),a("KeyH","р","Р","Р","р","h","H","H","h"),a("KeyJ","о","О","О","о","j","J","J","j"),a("KeyK","л","Л","Л","л","k","K","K","k"),a("KeyL","д","Д","Д","д","l","L","L","l"),a("Semicolon","ж","Ж","Ж","ж",";",";",":",":"),a("Quote","э","Э","Э","э","'","'",'"','"'),a("Enter","Enter","Enter","Enter","Enter","Enter","Enter","Enter","Enter")],[a("ShiftLeft","Shift","Shift","Shift","Shift","Shift","Shift","Shift","Shift"),a("KeyZ","я","Я","Я","я","z","Z","Z","z"),a("KeyX","ч","Ч","Ч","ч","x","X","X","x"),a("KeyC","с","С","С","с","c","C","C","c"),a("KeyV","м","М","М","м","v","V","V","v"),a("KeyB","и","И","И","и","b","B","B","b"),a("KeyN","т","Т","Т","т","n","N","N","n"),a("KeyM","ь","Ь","Ь","ь","m","M","M","m"),a("Comma","б","Б","Б","б",",",",","<","<"),a("Period","ю","Ю","Ю","ю",".",".",">",">"),a("Slash",".",".",",",",","/","/","?","?"),a("ArrowUp","▲","▲","▲","▲","▲","▲","▲","▲"),a("ShiftRight","Shift","Shift","Shift","Shift","Shift","Shift","Shift","Shift")],[a("ControlLeft","Ctrl","Ctrl","Ctrl","Ctrl","Ctrl","Ctrl","Ctrl","Ctrl"),a("MetaLeft","Win","Win","Win","Win","Win","Win","Win","Win"),a("AltLeft","Alt","Alt","Alt","Alt","Alt","Alt","Alt","Alt"),a("Space","","","","","","","",""),a("AltRight","Alt","Alt","Alt","Alt","Alt","Alt","Alt","Alt"),a("ArrowLeft","◄","◄","◄","◄","◄","◄","◄","◄"),a("ArrowDown","▼","▼","▼","▼","▼","▼","▼","▼"),a("ArrowRight","►","►","►","►","►","►","►","►"),a("ControlRight","Ctrl","Ctrl","Ctrl","Ctrl","Ctrl","Ctrl","Ctrl","Ctrl")]]}var r,s;return r=i,(s=[{key:"isCapsed",get:function(){return this.isCapsLockActivated},set:function(e){this.isCapsLockActivated=e,this.caps(e)}},{key:"toggleHidden",value:function(e,t,n){Array.from(this.keyElementsNodeList).forEach((function(a){Array.from(a.children).forEach((function(a){Array.from(a.children).forEach((function(a){e?a.classList.contains(t)?a.classList.remove("hidden"):a.classList.add("hidden"):e||(a.classList.contains(n)?a.classList.remove("hidden"):a.classList.add("hidden"))}))}))}))}},{key:"changeLanguage",value:function(){var e=this;Array.from(this.keyElementsNodeList).forEach((function(t){Array.from(t.children).forEach((function(t){t.classList.contains(e.selectedLanguage)?t.classList.add("hidden"):t.classList.remove("hidden")}))})),"eng"===this.selectedLanguage?(this.selectedLanguage="rus",localStorage.setItem("language","rus")):"rus"===this.selectedLanguage&&(this.selectedLanguage="eng",localStorage.setItem("language","eng"))}},{key:"caps",value:function(e){e?document.querySelector(".CapsLock").classList.add("active"):document.querySelector(".CapsLock").classList.remove("active"),this.toggleHidden(e,"caps","standard")}},{key:"shift",value:function(e){this.toggleHidden(e,this.isCapsed?"capsShift":"shift",this.isCapsed?"caps":"standard")}},{key:"initEvents",value:function(){var t=this;window.addEventListener("keydown",(function(e){if(e.preventDefault(),t.textareaElement.focus(),"CapsLock"===e.code)return t.isCapsed=!t.isCapsed,void e.target.removeEventListener("keydown",t.topw);if(document.querySelector(".".concat(e.code)).classList.add("active"),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code){var n="",a=t.textareaElement.selectionStart,i=t.textareaElement.value.split("");if("CapsLock"!==e.code&&"ShiftLeft"!==e.code&&"ShiftRight"!==e.code&&"AltLeft"!==e.code&&"AltRight"!==e.code&&"ControlLeft"!==e.code&&"ControlRight"!==e.code&&"MetaLeft"!==e.code){if("Backspace"===e.code){if(0===a)return;return document.getElementById("textarea").value=document.getElementById("textarea").value.split("").filter((function(e,t){return t!==a-1})).join(""),t.textareaElement.selectionStart=a-1,void(t.textareaElement.selectionEnd=a-1)}if("Delete"===e.code)return document.getElementById("textarea").value=document.getElementById("textarea").value.split("").filter((function(e,t){return t!==a})).join(""),t.textareaElement.selectionStart=a,void(t.textareaElement.selectionEnd=a);if("Tab"===e.code)return n="    ",i.splice(a,0,n),document.getElementById("textarea").value=i.join(""),t.textareaElement.selectionStart=a+4,void(t.textareaElement.selectionEnd=a+4);if("Space"===e.code)return n=" ",i.splice(a,0,n),t.textareaElement.value=i.join(""),t.textareaElement.selectionStart=a+1,void(t.textareaElement.selectionEnd=a+1);if("Enter"===e.code)return n="\n",i.splice(a,0,n),t.textareaElement.value=i.join(""),t.textareaElement.selectionStart=a+1,void(t.textareaElement.selectionEnd=a+1);Array.from(document.querySelector(".".concat(e.code)).children).forEach((function(e){e.classList.contains("hidden")||Array.from(e.children).forEach((function(e){e.classList.contains("hidden")||(n=e.innerText)}))})),i.splice(a,0,n),t.textareaElement.value=i.join(""),t.textareaElement.selectionStart=a+1,t.textareaElement.selectionEnd=a+1}}else t.shift(!0)})),window.addEventListener("keyup",(function(e){"CapsLock"!==e.code&&document.querySelector(".".concat(e.code)).classList.remove("active"),("AltLeft"!==e.code&&"AltRight"!==e.code||!0!==e.ctrlKey)&&("ControlLeft"!==e.code&&"ControlRight"!==e.code||!0!==e.altKey)||t.changeLanguage(),"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||t.shift(!1)})),Array.from(this.keyElementsNodeList).forEach((function(n){n.addEventListener("mousedown",(function(a){a.preventDefault(),t.textareaElement.focus(),Array.from(n.children).forEach((function(a){if(!a.classList.contains("hidden")){var i=n.className.split(" ")[1],r=(f=Array.from(a.children).filter((function(e){return!e.classList.contains("hidden")})),h=1,function(e){if(Array.isArray(e))return e}(f)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,r=[],s=!0,c=!1;try{for(n=n.call(e);!(s=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{s||null==n.return||n.return()}finally{if(c)throw i}}return r}}(f,h)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(f,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];if("CapsLock"===i)return void(t.isCapsed=!t.isCapsed);if(document.querySelector(".".concat(i)).classList.add("active"),"ShiftLeft"===i||"ShiftRight"===i)return void t.shift(!0);var s="",c=t.textareaElement.selectionStart;if("CapsLock"===i||"ShiftLeft"===i||"ShiftRight"===i||"AltLeft"===i||"AltRight"===i||"ControlLeft"===i||"ControlRight"===i||"MetaLeft"===i)return;if("Backspace"===i){if(0===c)return;return t.textareaElement.value=t.textareaElement.value.split("").filter((function(e,t){return t!==c-1})).join(""),t.textareaElement.selectionStart=c-1,void(t.textareaElement.selectionEnd=c-1)}if("Delete"===i)return t.textareaElement.value=t.textareaElement.value.split("").filter((function(e,t){return t!==c})).join(""),t.textareaElement.selectionStart=c,void(t.textareaElement.selectionEnd=c);if("Tab"===i){s="    ";var l=t.textareaElement.value.split("");return l.splice(c,0,s),t.textareaElement.value=l.join(""),t.textareaElement.selectionStart=c+4,void(t.textareaElement.selectionEnd=c+4)}if("Space"===i){s=" ";var o=t.textareaElement.value.split("");return o.splice(c,0,s),t.textareaElement.value=o.join(""),t.textareaElement.selectionStart=c+1,void(t.textareaElement.selectionEnd=c+1)}if("Enter"===i){s="\n";var d=t.textareaElement.value.split("");return d.splice(c,0,s),t.textareaElement.value=d.join(""),t.textareaElement.selectionStart=c+1,void(t.textareaElement.selectionEnd=c+1)}s=r.innerText;var u=t.textareaElement.value.split("");u.splice(c,0,s),t.textareaElement.value=u.join(""),t.textareaElement.selectionStart=c+1,t.textareaElement.selectionEnd=c+1}var f,h}))})),document.addEventListener("mouseup",(function(){Array.from(n.children).forEach((function(){var e=n.className.split(" ")[1];"ShiftLeft"!==e&&"ShiftRight"!==e||t.shift(!1),"CapsLock"!==e&&document.querySelector(".".concat(e)).classList.remove("active")}))}))}))}},{key:"init",value:function(){var e=this;localStorage.getItem("language")?this.selectedLanguage=localStorage.getItem("language"):this.selectedLanguage="eng";var t=document.createElement("div"),n=document.createElement("textarea");null==n||n.classList.add("textarea"),n.id="textarea";var a=document.createElement("p");null==a||a.classList.add("title"),a.innerText="RSS Виртуальная клавиатура",t.insertAdjacentElement("beforeend",a);var i=document.createElement("p");null==i||i.classList.add("description"),i.innerText="Клавиатура создана в операционной системе Windows";var r=document.createElement("p");null==r||r.classList.add("language"),r.innerText="Для переключения языка комбинация: левыe ctrl + alt";var s=document.createElement("div");null==s||s.classList.add("keyboard"),this.keys.forEach((function(t){var n=document.createElement("div");null==n||n.classList.add("row"),t.forEach((function(t){var a=document.createElement("div");null==a||a.classList.add("key",t.code),a.innerHTML='\n                <span class="eng hidden">\n                    <span class="standard">'.concat(t.eng.standard,'</span>\n                    <span class="shift hidden">').concat(t.eng.shift,'</span>\n                    <span class="caps hidden">').concat(t.eng.caps,'</span>\n                    <span class="capsShift hidden">').concat(t.eng.capsShift,'</span>\n                </span>\n                <span class="rus hidden">\n                    <span class="standard">').concat(t.rus.standard,'</span>\n                    <span class="shift hidden">').concat(t.rus.shift,'</span>\n                    <span class="caps hidden">').concat(t.rus.caps,'</span>\n                    <span class="capsShift hidden">').concat(t.rus.capsShift,"</span>\n                </span>\n            "),Array.from(a.children).forEach((function(t){t.classList.contains(e.selectedLanguage)&&t.classList.remove("hidden")})),n.insertAdjacentElement("beforeend",a)})),s.insertAdjacentElement("beforeend",n)})),t.insertAdjacentElement("beforeend",n),t.insertAdjacentElement("beforeend",s),t.insertAdjacentElement("beforeend",i),t.insertAdjacentElement("beforeend",r),document.body.insertAdjacentElement("afterbegin",t),this.keyElementsNodeList=document.getElementsByClassName("key"),this.textareaElement=n,this.initEvents()}}])&&t(r.prototype,s),Object.defineProperty(r,"prototype",{writable:!1}),i}())).init()})();